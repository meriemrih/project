@version: 4.3

# ðŸ”¹ DÃ©finition des sources (rÃ©ception des logs)
source s_network {
    udp(port(514));
    tcp(port(514));
    system();
    internal();
};

# ðŸ”¹ Destination : Fichier global
destination d_local { 
    file("/var/log/syslog-ng/all_logs.log"); 
};

# ðŸ”¹ Destination : Logs triÃ©s par service
destination d_per_service { 
    file("/var/log/syslog-ng/$HOST/$PROGRAM.log" create_dirs(yes)); 
};

# ðŸ”¹ Destination : Envoi vers Logstash (AjoutÃ©)
#destination d_logstash {
#    tcp("172.21.0.16" port(5000));  # Adresse IP de Logstash sur ElkNet
#};

# ðŸ”¹ Capture et envoi des logs aux destinations
log {
    source(s_network);
    destination(d_local);
    destination(d_per_service);
#    destination(d_logstash);  # Envoi vers Logstash
};

